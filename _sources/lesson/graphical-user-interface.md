# Графический интерфейс

Графический интерфейс пользователя — разновидность пользовательского интерфейса, в котором элементы интерфейса, представленные на дисплее, исполнены в виде графических изображений.

## История развития

[A History of the GUI](https://arstechnica.com/features/2005/05/gui/)

Идея о взаимодействии с машиной через изображения на плоском экране появились еще до того, как люди узнали о компьютерах
В 1930-х годах Вэннивер Буш написал свое "Как мы можем мыслить"., который был опубликован в 1945 году.
В нем он описал устройство для сбора и управления информацией. Документы заносились внутрь него фотографированием, а показывались проецированием на стеклянную поверхность столешницы. Содержимое устройства можно было каталогизировать, задавать ассоциативные связи между хранимыми документами. Оно повторяло функции мозга человека, но по сравнению с ним, не имел свойства забывать.

Первая программа, которая использовала графический интерфейс, была Sketchpad. Она позволяла рисовать отрезки и дуги окружностей прямо на экране с использованием светового пера. Нарисованные изображения могли быть размножены, масштабированы и повернуты. К кривым накладывались ограничения, которые выдерживали при их рисовании — диаметры дуг, углы, параллельность. Программа разрабатывалась Айвеном Сазерлендом как работа над его диссертацией и была продемонстрирована в 1963 году. Sketchpad считается прообразом современных систем автоматизированного проектирования, в которых используются те же самые идеи.

Большой вклад в популяризацию персонального компьютера внес Дуглас Энгельбарт. В 1962-1969 годах Дуглас Энгельбарт совместно с группой ученых работали над проектом "Онлайн Системы". Результаты работы он представил в 1968 году 8 декабря на компьютерной конференции. Это событие осталось в истории под названием "Мать всех демонстраций". На ней исследователь показал, как можно использовать персональный компьютер для совместной работы над документами. Компьютер состоял из монитора, клавиатуры и мыши. На экране демонстрировался текст совместно с рисунками и видео. А по экрану перемещался указатель мыши, которую он назвал "жучком". Его перемещением управлял он с помощью специального устройства, которая позже будет называться мышью. По нажатию на сноску в документе, на экране показывались другие документы. Для работы над документом он использовал своего коллегу, который располагался в отдалении от него. А связь с ним поддерживалась через телекамеру. Он показал всему миру как можно использовать компьютер , графический интерфейс пользователя, первый прототип мыши. В 1967 году Энгельберт подал заявку на патент, но получил его только 1970 году, на  изобретение "индикатора положения X-Y для системы отображения" — современную компьютерную мышь.

Демонстрация Энгельбарта впечатлила многих. Высшее руководство Xerox осознавало перспективу компьютерного и особенно безбумажного будущего. Xerox сделала свое состояние на ксерографии и копировальной технике, патент на который закачивался в 1970 году. Вытеснение информации на бумаге, а также ожидаемая конкуренция могли его разорить. По настоянию главного научного сотрудника Xerox Джека Голдмана в 1970 году был сформирован научно-исследовательский центр Xerox PARC. В него приглашались ученые со всего мира для свободной работы над перспективными задачами. Здесь были придуманы лазерный принтер, ethernet, концепция ноутбука и принцип WYSIWYG.

Первый в мире компьютер, использующий графический интерфейс, был разработан в 1972-1973 годах сотрудниками Xerox PARC. В нем использовалась метафора рабочего стола, графическое меню, значки, мышь, взаимодействие с другими компьютерами через сеть. Компьютеру дали название Alto. Основной его целью была подготовка документов для изобретенного тогда лазерного принтера. Нужен был способ подготовки документов, содержащих одновременно и текст и рисунок и способы редактирования их. Текстовый интерфейс пользователя не позволял сделать этого. Экран Alto имел портретную ориентацию и соотношение размеров формата A4. Количество пикселей экрана соответствовал количеству точек, который принтер может напечатать. Для компьютера были разработаны текстовые редакторы с принципом WYSIWYG — что видишь, то и получишь. Этот принцип указывал, что изображение документа на экране совпадает с напечатанным на принтере документом. Также компьютер был укомплектован графическим редактором растровых изображений, печатных плат и интегральных схем.

Компьютер Alto не продавался на рынке, а использовался только внутри Xerox PARC и в некоторых университетах. Развитием Xerox Alto стал коммерческий Xerox Star — офисная система из компьютера и лазерного принтера. Он предлагал возможности для работы по сети, подготовке и печати документов с рисунками. Графический интерфейс был упрощен и окна с программами не перекрывались, а разделяли пространство экрана на части. Руководство Xerox боялось, что пользователи не поймут новшества. Но компьютер не получил широкого распространения из-за высокой цены — от 50 до 100 тысяч долларов. В то время уже были компьютеры с ценами от 300 долларов до 12 тысяч.

Результатом работы на Alto стал язык программирования SmallTalk. Он стал первым в мире языком, использовавший объектно-ориентированный подход для создания программ. Такой подход удобен при программировании графического интерфейса. Набор данных скрывается внутри объекта, а для работы с ними доступны только набор функций, связанных с этим объектом.

Компания Apple, имевшая на рынке успех со своим компьютером Apple II, разработала следующую модель под названием Lisa. Lisa изначально ориентировалась на текстовый интерфейс пользователя, пока сотрудники, работавшие ранее в Xerox PARC, не убедили других сделать его с графический интерфейсом. В Lisa впервые использовали расположенный над окном строку главного меню, выпадающее меню, сочетания клавиш для быстрого вызова команд, корзина для удаления файлов, серый цвет неактивного пункта меню. Мышь упростили до одной кнопки. С помощью нее знаки могли выделяться и запускаться. Запуск выполнялся двойным щелчком. Все файлы на диске представлялись в виде значков. Для их перемещения использовалась мышь, что привело к появлению понятия drag-and-drop. Все эти идеи стали стандартом и существуют до сих пор. Но работы над Lisa затянулись на 5 лет. стоимость компьютера составляла около 10 тысяч долларов.

Сотрудник Apple Стив Джобс переключил свое внимание от Lisa к другой модели Macintosh, которая разрабатывалась с учетом удешевления стоимости, а идеи позаимствовала от Lisa. Операционная система была переписана заново с учетом малых аппаратных ресурсов. Стоимость модели Macintosh 128K составляла 2,5 тысяч долларов. Macintosh стал первым персональным компьютером с графический интерфейсом, имевшим коммерческий успех. С него в 1984 году началось внедрение графического интерфейса в массы.

Компьютеры с похожим принципом взаимодействия с пользователем начали появляться в 1985 годах. Это Atari ST от Atari Corporation, Amiga 1000 от Commodore и Windows 1.0 от Microsoft.

С появлением доступных персональных компьютеров стали появляться и прикладные программы для них. Программы имели некоторые общие черты, но все же отличались друг от друга размещением и названием команд, комбинациями клавиш для их вызова. IBM выпустил стандарт, регламентирующий внешний вид и поведение программ. Целью стандарта было упростить переход пользователя от одной программы к другой. Эти требования выполнялись в ОС от IBM и Microsoft и со временем к ним адаптировались программы внешних поставщиков. Можно думать, что мало кто читал этот стандарт, но все его требования считаются само собой разумеющимися. Как пункт меню "Справка" располагается в конце, а "Файл" в начале строки главного меню; команды меню, требующие дополнительные данные, заканчиваются троеточием; нажатие F1 приводит к появлению справочной информации; переход между полями ввода выполняется через Tab и другое.

Каждая аппаратная платформа и ОС содержит свои требования к интерфейсу пользователя и к используемым технологиям. Эти требования содержатся в специальных документах Human Interface Guidelines (HIG). Например:
* GNOME Human Interface Guidelines;
* Android User Interface Guidelines;
* Mac OS X Human Interface Guidelines;
* Windows Vista User Experience Guidelines.

Классическая реализация интерфейса ОС на современных персональных компьютерах получило название WIMP от четырех ее составляющих — windows, icons, menu, pointer — окна, значки, меню и указатель мыши. Ее появление обязано сотрудникам Xerox PARC в 1970-х годах. Она показала свою эффективность для персональных компьютеров. Но существуют другие программы и аппаратные платформы, для которых такой подход неэффективен, поэтому и не применяется. Сюда входят мобильные устройства с их малыми площадями экрана, компьютерные игры, программы трехмерного моделирования. Для них разрабатывается другие подходы для взаимодействия с пользователем. В мобильных устройствах отсутствует указатель мыши и сама мышь. Вместо них указательную функцию совместно с сенсорными экраном выполняет стилус или пальцы пользователя. Из-за малой площади экрана графические изображения кнопок, значков. меню и остальных элементов скрыты. Они появляются при определенных действиях. направление в графическом интерфейсе, не совпадающее с WIMP, стало называться post-WIMP.

## Оконный графический интерфейс

Графический интерфейс в современных настольных компьютерах использует метафоры из реального окружения пользователя. Экран монитора рассматривается как столешница рабочего стола, на котором расположены документы. Документы располагаются в стопке, из которой любой из них можно переместить наверх и работать с этим документом. Для удаления документов существует корзина. Документ ыразмещаются в папках (аналогия с папкой для документов). На рабочем столе присутствуют аксессуары — калькулятор, блокнот и часы. Файловый менеджер представляет наборы файлов и каталогов в виде дерева. В то же время интерфейс не ограничен метафорами. Они расширяются объектами, которых нет в реальной жизни — это панель задач, значки, меню "Пуск" и другое.

Рабочий стол и его окружение и способы взаимодействия с ним, называется средой рабочего стола. Такой средой в ОС Windows является проводник Windows. Она также является графической оболочкой этой ОС. Важность проводника можно увидеть и почувствовать, если остановить процесс explorer.exe. В UNIX-подобные ОС есть несколько вариантов среды рабочего стола, но наиболее популярные из них являются GNOME и KDE. Для MacOS такой средой будет Aqua.

Каждая запущенная программа занимает прямоугольную область экрана, называемое окном или главным окном приложения. Окно может занимать всю поверхность экрана или произвольную его часть. Размеры и расположение окна могут быть изменены с помощью мыши или клавиатуры. Внутри окна располагаются элементы интерфейса. Для доступа и управления ими также применяется мышь и клавиатура. Мышь может быть заменена любыми другим указательным устройством — джойстиком, тачпадом, трекболом и т.п.

Основными элементами внутри окна являются строка главного меню (menu bar), Она располагается наверху и дает доступ к спискам опций и команд приложения. Снизу окна размещается строка состояния (status bar). В нее выводится информация о текущем состоянии программы и подсказки. Если содержимое окна целиком не помещается в текущие размеры, то по бокам появляются вертикальные или горизонтальные полосы прокрутки (scroll bar).

Остальная область окна организуется по разному, в зависимости от логики приложения. Можно выделить 4 способа организации интерфейса внутри окна. Это
* фреймовый;
* однодокументный;
* многодокументный;
* вкладочный.

Эти способы также могут комбинироваться друг с другом.

Окно может поддерживать систему фреймов — окно разбито на несколько функционально независимых областей — фреймов, каждое из которых может быт интерпретировано как отдельным окном.

## Типовые элементы интерфейса

Элементы интерфейса могут в своем составе также содержать другие элементы. Они могут быть активными и заблокированными. К активным элементам можно обратиться. Заблокированный элемент выделяется серым цветом и не принимает сигналов от пользователя.

Активный элемент может иметь фокус или быть в фокусе. Это означает, что вводимые с клавиатуры данные будут передаваться этому элементу. В фокусе может быть только один элемент.

Элемент может иметь обработчики различных событий. Событиями могут быть:
* нажатие/отжатие мышью на элемент
* становиться в фокусе, потерять фокус;
* нажатие/отпускание клавиш;
* и др.

На событие реагирует только активные элементы в фокусе. Если элемент не содержит обработчика, то событие передается родительскому элементу. Родительским элементом всех других элементов является главное окно приложения.

## Управляющие элементы

Наиболее известным элементом интерфейса является кнопка. Нажатие на нее приводит к выполнению некоторого действия. Подсказка о выполняемом действии дана в виде текста или изображения на самой кнопке.

Кнопка, при определенном нажатии на которую, появляется выпадающий список, называют комбо-кнопкой.

Кнопка, меняющая циклически свое состояние при нажатии, называют счетной кнопкой (toggle button). Обычно бывают два состояния — нажато и отпущено. В некоторых случаях может быть и больше.

Значок (icon) — это небольшая картинка, связанная с приложением, файлом, каталогом, окном, устройством и т.п. Щелчок мышью на значке запускает связанное с ним действие.

## Элементы для ввода данных

Набор кнопок, позволяющих выбрать одну опцию из предопределенного набора, называют радиокнопкой или переключателем.

Флаговая кнопка (check box) позволяет выбрать из двух значений одно.

Для ввода текста без переноса строки используется поле ввода текста (text box, edit field).

Для выбора одного значения из предопределенного набора используют элемент выпадающий список (list box). По сравнению с переключателем, он занимает меньше места на экране за счет сокрытия выбираемых данных.

Комбинация поля ввода текста с выпадающим списком возможных значений, называют комбинированным списком или поле со списком (combo box).
Для ввода целых чисел используется счетчик (spinner). Она позволяет не только вводить число с клавиатуры, но и уменьшать/увеличивать уже введенное число.

### Информационные элементы

Информационная текстовая надпись вставляется через элемент метка (label).

Для помощи пользователю используют всплывающую подсказку (tooltip), возникающую при наведении на интересующие элементы.

### Группирующие элементы

Кнопки могут быть объединены в панель инструментов (tool bar) по общему признаку.

## Устройства для ввода данных

Основным устройством для ввода данных являются мышь и клавиатура. Мышь используется как указательное устройств в плоскости. Мышь удобна тем, что имеет высокую точность позиционирования. Мышцы руки не так сильно устают от долгой работы с ним. Для ввода символьных данных и команд используется клавиатура со стандартным расположением основных клавиш.

### Взаимодействие через мышь

Устройство мышь изобрел Дуглас Энгельбарт в 1960-х годах во время работа над проектом "Онлайн Системы" и запатентовал его в 1970 году. С той поры внутреннее устройство и внешний вид мыши претерпели множество изменений. На сегодняшний день стандартная мышь — это устройств из двух кнопок и колесика в середине с оптическим механизмом определения движения.

Основные функции мыши — манипулирование объектами на плоскости:

* drag-and-drop — переместить и бросить; перемещение/копирование файлов, открытие документа программой;
* point-and-click — указать и щелкнуть; открывает ссылку, выделяет объект;
* двойной щелчок левой кнопкой — запуск программы, открытие документа;
* щелчок правой кнопкой — открытие контекстного меню.

Существует закон Фитса, который связывает время на выполнение действия с расстоянием между указателем мыши и объектом и размерами этого объекта. Чем дальше и тем меньше объект, тем больше времени надо для выполнения действия. Именно по этому контекстное меню появляется рядом с указателем мыши, чтобы уменьшить время вызова команды за счет уменьшения расстояния на перемещение.

### Взаимодействие через клавиатуру

Отсутствие мыши усложнит, но не ограничит доступ к возможностям программы. В некоторых случаях использование клавиатуры взамен мыши может ускорить взаимодействие с программой.

*Сочетание клавиши* (горячая клавиши) — комбинация клавиш, которому назначена определенная команда. Там, где нужна быстрая реакция. Глобальные и локальные сочетания клавиш — перехватывает или нет другие программы или ОС.

*Клавиши-модификаторы* (Ctrl, Alt, Shift, Win). Увеличивают количество сочетаний при одном и том же количестве клавиш. Они модифицируют действие, привязанное к обычной клавише.

*Функциональные клавиши* (F1, F2, ... F12) запрограммированы на вызов команд ОС или выполнение определенных действий другими программами. F1 — помощь, F2 — переименование, F3 — поиск, F5 — обновление, F10 — активация главного меню, F11 — полноэкранный режим.

## Программная реализация интерфейса

В стандартные библиотеки Си и С++ не заложены возможности по созданию графического интерфейса пользователя. Эта возможность предоставляется внешними библиотеками. Рассмотрим три наиболее популярные из них — это Qt, wxWidgets, GTK. Рассматриваемые библиотеки являются свободными и кроссплатформенными, что и сделало их популярными.

Отрисовка двумерных изображений Cairo в UNIX, GDI в Microsoft Windows, Quartz 2D в Mac OS X.

Элементы графического интерфейса реализуются средствами самой ОС или доступны через отдельную библиотеку. В ОС Windows базовые элементы интерфейса реализованы в user32.dll и доступны через Windows API. Более широкие возможности по созданию программ с графическим интерфейсом предоставляют специализированные библиотеки, как например Qt, wxWidgets, GTK, Tk и другие.

Для более удобного размещения элементов интерфейса в окне приложения используют конструкторы GUI. Это специальные программы для визуального создания графических компонент программы. Qt Creator, C++ Builder, Delphi, wxFormBuilder.

Реализация графического интерфейса состоит из двух частей — это размещение элементов интерфейса в окне приложения и добавление логики на события от интерфейса.

UIML (User Interface Markup Language) — подмножество XML для описания пользовательского интерфейса приложения.

### Пользовательский интерфейс средствами браузера

Существует отдельный класс приложений, которые для реализации графического интерфейса используют средства веб-браузера — это веб-приложения.

Веб-приложение — клиент-серверное приложение, в котором клиент работает запускается в браузере. Для реализации интерфейса используются HTML, CSS, а для взаимодействия с сервером и обработки действий пользователя — JavaScript. Нет зависимости от конкретной ОС. Снимается нагрузка на машину пользователя — сложные действия выполняются на удаленном высокопроизводительном сервере. Появился тренд на перенос рабочего места из офиса в любую точку на планете, где есть интернет.

XML описывает интерфейс, CSS задает внешний вид, JavaScript определяет поведение приложения.

### Архитектура создания приложения MVC

Шаблон проектирования приложений с графическим интерфейсом.
