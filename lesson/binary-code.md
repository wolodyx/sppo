# Двоичный код

## Введение

% Фиксация знаний на бумаге
Знания, которые мы записываем на бумаге, состоят из последовательности знаков.
Количество используемых знаков ограничено -- это десять цифр, буквы алфавита и знаки препинания.
Для англоязычного автора набор знаков иллюстрирует таблица ASCII без управляющих символов (изображены на красном фоне).
Для русскоязычного автора таблица расширится кириллическими буквами.

```{figure} ../images/ASCII-symbols.png
```

% Алфавит
Такой стандартный набор знаков называется *алфавитом*.
Несмотря на ограниченность знаков, записанная ими информации может быть бесконечно много.
Художественные произведения Пушкина, Толстого и Достоевского, государственные законы и стандарты, руководство по эксплуатации холодильника, телевизора и стиральной машины написаны с использованием одного и того же набора знаков, одного и того же алфавита.

% Музыка и нотная запись.

% Алфавит компьютера и двоичный код
Современные компьютеры (электронно-вычислительные устройства) используют двоичный код для представления и преобразования информации.
Алфавит состоит только из двух знаков: нуля и единицы.
Как показывает практика, их достаточно для кодирования любой сложной структуры, будь то целые и вещественные числа, текст, изображение, видео, трехмерную модель.
Но работая на компьютере, мы не сталкиваемся двоичными числами напрямую.
Мы видим их постижимые людям образы -- текст, десятичные числа, изображения, звуки.

## Позиционная система счисления

% Понятие десятичного числа
Привычные нам *десятичные числа* записываются с помощью знаков $0$, $1$, $2$, $3$, $4$, $5$, $6$, $7$, $8$, $9$, называемых *цифрами*.
Вклад цифры в значение числа зависит от ее позиции в числе.
Эта позиция называется *разрядом*.
Самая правая цифра, или младший разряд, показывает количество единиц в числе.
Следующие за ней цифры указывают на количество десятков, сотен, тысяч и так далее.
Вес каждого следующего разряда отличается от предыдущего на 10.

Число $x$, состоящее из цифр $\alpha_{n-1}$, ..., $\alpha_1$, $\alpha_0$, определяется формулой

$$
x = \sum_{k=0}^{n-1}{\alpha_k 10^k}
$$

Так, число 207 рассматривается как 2 сотни, 0 десятков и 7 единиц:

$$
207 = 2*100 + 0*10 + 7*1
$$

Запись числа, при котором оно представлено цифрами, значение которых зависит от их позиции, называется *позиционной системой счисления*.
Количество используемых цифр определяет ее *основание*.
Десятичная система счисления есть частный случай позиционной системы с основанием 10.

% Понятие двоичного числа
Двоичный код можно расценивать как число, записанное в *двоичной системе счисления*, к позиционной с основанием 2.

% Преобразование двоичного числа в десятичное
Чтобы преобразовать двоичное число в удобное нам десятичное используется следующая формула:

$$
x = \sum_{k=0}^{n-1}{\alpha_k 2^k}
$$

Основание 2 дает следующий ряд весов: `1, 2, 4, 8, 16, 32, 64, 128, 256, 512, 1024, ...`.

```{figure} ../images/bin-weight.png
```

Эти значения нам знакомы из характеристик объема памяти (флешек, оперативной и дисковой памяти).
Цифры 0 и 1 при каждой позиции указывают входит ли вес этой позиции во вклад числа.
Возьмем 8-значное двоичное число $10011100$.
Его знчение будет 156 (128 + 16 + 8 + 4).

% Преобразование десятичного числа в двоичное
Обратное преобразование, из десятичного в двоичное, аналогично: разложим число на сумму степеней двойки.

$$
197_{10} = 128 + 64 + 4 + 1 = 2^7 + 2^6 + 2^2 + 2^0 = 11000101_2
$$

% Шестнадцатеричная система счисления
Двоичное представление числа для человека неудобен тем, что длинная и однообразная.
Чтобы укоротить его используют *шестнадцатеричную систему*.
В ней числа представляются шестнадцатью символами $0-9$, $A$, $B$, $C$, $D$, $E$, $F$.
Удобна тем, что основание есть степень двойки.
Идущие последовательно 4 двоичных разряда можно свернуть в одну шестнадцатеричную цифру, воспользовавшись следующей таблицей соответствия:

| $число_2$  | $цифра_{16}$ | $число_2$  | $цифра_{16}$ |
|------------|--------------|------------|--------------|
| $0000$     |    $0$       | $1000$     |    $8$       |
| $0001$     |    $1$       | $1001$     |    $9$       |
| $0010$     |    $2$       | $1010$     |    $A$       |
| $0011$     |    $3$       | $1011$     |    $B$       |
| $0100$     |    $4$       | $1100$     |    $C$       |
| $0101$     |    $5$       | $1101$     |    $D$       |
| $0110$     |    $6$       | $1110$     |    $E$       |
| $0111$     |    $7$       | $1111$     |    $F$       |

Двоичное $11000101_2$ превращается в шестнадцатеричное $C5_{16}$.

Когда формат двоичного файла не известен, то его содержимое изучают в редакторе двоичных данных.
Редактор показывает числа в шестнадцатеричной системе счисления.

## Кодирование целых чисел

Позиционная система счисления с основанием 2 позволяет выразить любое целое число.
Но это соответствие представлено только для положительных чисел.
Используемых нами отрицательных числах используется дополнительный знак "минус".
В двоичный код мы не можем добавить еще символа.
Поэтому нужны другой способ кодирования целых чисел: как отрицательных, так и положительных.

Существуют четыре способа кодировать отрицательные числа:
* прямой код;
* код со смещением;
* обратный код;
* дополнительный код.

% Прямой код
В прямом коде старший разряд хранит знак, а остальные разряды представляют модуль числа.
Для отрицательных чисел знаковый разряд содержит $1$.

```{figure} ../images/signed-magnitude-representation.png
```

% Код со смещением


% Обратный код

% Дополнительный код
Дополнительный код отрицательного числа получается инвертированием двоичного представления модуля числа и последующим прибавлением единицы.

```{admonition} Пример
Выразим отрицательное число $-12_{10}$ в дополнительном коде.
Модуль числа в двоичном представлении имеет вид $01100_{2}$.
Проинвертируем число и получим $10011_{2}$.
Прибавим единичку и получим $10100_{2}$.
```

% Двоично-десятичное кодирование
Десятичные числа могут кодироваться по другому, когда каждая десятичная цифра заменяется ее двоичным представлением.
Такой способ кодирования называется *двоично-десятичным* (BCD, bindary-coded decimal).
Десять значений можно закодировать 4 битами.
Таблица соответствия десятичной цифры двоично-десятичному коду выглядит следующим образом.

|$цифра_{10}$| $код_{BCD}$  |$цифра_{10}$| $код_{BCD}$  |
|------------|--------------|------------|--------------|
|    $0$     |    $0000$    |    $5$     |    $0101$    |
|    $1$     |    $0001$    |    $6$     |    $0110$    |
|    $2$     |    $0010$    |    $7$     |    $0111$    |
|    $3$     |    $0011$    |    $8$     |    $1000$    |
|    $4$     |    $0100$    |    $9$     |    $1001$    |

Остальные шесть значений ($1010$, $1011$, $1100$, $1101$, $1110$, $1111$) являются запрещенными и не используются.
% Преимущества BCD-кода

% Отрицательные целые числа
Двоичное представление числа выше позволяет кодировать только положительные числа.
В мире людей для отрицательных чисел используется дополнительный знак "минус" ($-$).
Отрицательные числа кодируются тремя способами: прямым, обратным и дополнительным кодами.
Во всех трех случаях страший разряд числа является знаковым.
Если его значение `1`, то число отрицательное.

% Диапазон целых чисел

## Кодирование вещественных чисел

Для кодирования вещественных чисел в мире людей используется дополнительный символ "запятая" (в Европе и России, "точка" в США).
Символ "запятая" разделяет целую часть числа от дробной.

Вещественные числа в двоичном виде представляются приближенно.

Диапазон допустимых значений и точность.

% Вещественные числа с фиксированной точкой
Вещественные числа с фиксированной точкой применяются там, где диапазон чисел известен и он не выходит за фиксированные пределы.
Например, денежные суммы представляются кратно одной копейке.
Значения меньшие этого практического интереса не представляют.

% Недостатки фиксированной точки

% Вещественные числа с плавающей точкой
Аналог экспоненциальной записи числа.
Стандарт IEEE 754.
Знак, порядок и мантисса.

Число половинной точности. 10 битов на мантиссу, 5 битов на порядок и 1 бит на знак.
Число одинарной точности. 23 бита на мантиссу, 8 битов на порядок и 1 бит на знак.
Число двойной точности. 52 бита на мантиссу, 11 битов на порядок и 1 бит на знак.

Специальное значение для нуля -- все биты, кроме знакового, равны нулю.

Неопределенность (NaN, Not a Number), ошибка при арифметических операциях. Все разряды порядка единичные.

Бесконечность, если все разряды порядка единичные, а мантисса нулевая. Знак бесконечности определяется знаковым битом числа.
Как получить бесконечность -- при переполнении и при делении ненулевого числа на ноль.

## Кодирование текстовых символов

## Кодирование сложных структур

Форматы данных.
Текстовые и двоичные форматы данных.

## Список источников

1. https://arxiv.org/pdf/physics/0604149v1.pdf 
2. [Технологии: Метафорический компьютинг](https://kniganews.org/2012/06/06/metaphoric-computing/)
3. [Современные аналоговые компьютеры: есть будущее? / Хабр](https://habr.com/ru/post/146680/)
4. Сунцов Н.Н. Методы аналогий в аэрогидродинамике
5. [Представление символов, таблицы кодировок](https://neerc.ifmo.ru/wiki/index.php?title=Представление_символов,_таблицы_кодировок)
6. [Представление вещественных чисел](https://neerc.ifmo.ru/wiki/index.php?title=Представление_вещественных_чисел)
7. [Представление целых чисел: прямой код, код со сдвигом, дополнительный код](http://neerc.ifmo.ru/wiki/index.php?title=Представление_целых_чисел:_прямой_код,_код_со_сдвигом,_дополнительный_код)
8. [IEEE 754 -- стандарт двоичной арифметики с плавающей точкой](http://softelectro.ru/ieee754.html)
9. [Signed number representations](https://en.wikipedia.org/wiki/Signed_number_representations)
10. [Цело (тип данных)](https://ru.wikipedia.org/wiki/Целое_(тип_данных))


## Вопросы для самоконтроля

1. Какое двоичное представление имеет целое число 97?
2. Какое десятичное представление имеет двоичное число `110101101`?
3. Напишите программу преобразования:
   * десятичного числа в двоичное;
   * двоичного числа в десятичное;
   * десятичного числа в двоично-десятичное;
   * двоично-десятичного числа в десятичное.
4. Если для $n$ битов $2^n$ выдает количество возможных значений группы битов.
   Тогда как понимать, что при $n=0$, количество возможных значений не ноль, а одно?
